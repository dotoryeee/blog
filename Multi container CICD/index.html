
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../Failover%20for%20HA/">
      
      
        <link rel="next" href="../Project-1/">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.0.8">
    
    
      
        <title>Multi container CICD - dotoryeee's blog</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.0d440cfe.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.2505c338.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#multi-container-cicd" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="dotoryeee&#39;s blog" class="md-header__button md-logo" aria-label="dotoryeee's blog" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            dotoryeee's blog
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Multi container CICD
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="dotoryeee&#39;s blog" class="md-nav__button md-logo" aria-label="dotoryeee's blog" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    dotoryeee's blog
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        title1 1
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../3-Tier%20Basic%20Infra/" class="md-nav__link">
        3-Tier ê¸°ë³¸ ì¸í”„ë¼ êµ¬ì„±
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../API%20Gateway%20with%20Lambda/" class="md-nav__link">
        API Gateway with Lambda
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Access%20S3%2C%20DynamoDB%20with%20Lambda/" class="md-nav__link">
        Access S3, DynamoDB with Lambda
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../CICD%20on%20Single%20container/" class="md-nav__link">
        CICD on Single container
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Circle-CI%20basic/" class="md-nav__link">
        Circle-CI Basics
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Docker%20Proxy%20Layer%20for%20MySQL/" class="md-nav__link">
        Docker Proxy Layer for MySQL
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Docker%20basics/" class="md-nav__link">
        Docker basics
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Docker%20compose%20web%20GUI/" class="md-nav__link">
        Docker compose and web GUI
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Docker%20volume%20with%20MySQL/" class="md-nav__link">
        Docker volume with MySQL
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Failover%20for%20HA/" class="md-nav__link">
        Failover for HA
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Multi container CICD
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Multi container CICD
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    êµ¬ì„±ë„
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    ìš”ì•½
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#backendnodejs" class="md-nav__link">
    Backend(nodeJS)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#frontendreactjs" class="md-nav__link">
    Frontend(reactJS)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dockerfile-for-react" class="md-nav__link">
    Dockerfile ì‘ì„± - for React
  </a>
  
    <nav class="md-nav" aria-label="Dockerfile ì‘ì„± - for React">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dockerfiledev" class="md-nav__link">
    ê°œë°œ í™˜ê²½ìš© Dockerfile.dev
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dockerfile" class="md-nav__link">
    ìš´ì˜ í™˜ê²½ìš© Dockerfile
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nginx" class="md-nav__link">
    ë¼ìš°íŒ…ìš© Nginx ì„¤ì •(ì •ì íŒŒì¼ ì œê³µì„ ìœ„í•œ)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dockerfile-for-nodejs" class="md-nav__link">
    Dockerfile ì‘ì„± - for NodeJS
  </a>
  
    <nav class="md-nav" aria-label="Dockerfile ì‘ì„± - for NodeJS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dockerfiledev_1" class="md-nav__link">
    ê°œë°œ í™˜ê²½ìš© Dockerfile.dev
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dockerfile_1" class="md-nav__link">
    ìš´ì˜ í™˜ê²½ìš© Dockerfile
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#db" class="md-nav__link">
    DB ì„¸íŒ…
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#proxy-layer-nginx" class="md-nav__link">
    Proxy Layerìš© Nginx ì„¤ì •
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker-compose" class="md-nav__link">
    Docker compose ì‘ì„±
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ready-for-cicd" class="md-nav__link">
    ready for CICD
  </a>
  
    <nav class="md-nav" aria-label="ready for CICD">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#remove-mysql-container" class="md-nav__link">
    remove MySQL Container
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#travis-ci-yaml" class="md-nav__link">
    Travis CI YAML ì‘ì„±
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aws" class="md-nav__link">
    AWS
  </a>
  
    <nav class="md-nav" aria-label="AWS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dockerrunawsjson" class="md-nav__link">
    Dockerrun.aws.json ?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ecs" class="md-nav__link">
    ECS ì‘ì—… ì •ì˜ íŒŒì¼ ì‘ì„±
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aws-beanstalk" class="md-nav__link">
    AWS Beanstalk ìƒì„±
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aws-rds" class="md-nav__link">
    AWS RDS ìƒì„±
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aws_1" class="md-nav__link">
    AWS ë³´ì•ˆê·¸ë£¹
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#beanstalk-rds" class="md-nav__link">
    Beanstalk â†” RDS ì—°ê²°ì„ ìœ„í•œ í™˜ê²½ë³€ìˆ˜ ì„¤ì •
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    ë°°í¬ ì„¤ì •
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    ìµœì¢… í‘¸ì‹œ
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Project-1/" class="md-nav__link">
        Project - 1
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Prometheus%20and%20Grafana/" class="md-nav__link">
        Prometheus and Grafana
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Terraform%20AWS%20IAM/" class="md-nav__link">
        Terraform AWS IAM
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Terraform%20Backend/" class="md-nav__link">
        Terraform Backend
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Terraform%20Practice/" class="md-nav__link">
        Terraform Practice
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Terraform%20deploy%20VPC%20and%20Subnet/" class="md-nav__link">
        Terraform deploy VPC and Subnet
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Terraform%20deploy%20VPC/" class="md-nav__link">
        Terraform deploy VPC
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Transaction%20on%20GCP%20Spanner/" class="md-nav__link">
        Transaction on GCP Spanner
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../VPC%20Endpoint%20with%20Role/" class="md-nav__link">
        VPC Endpoint with Role
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    êµ¬ì„±ë„
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    ìš”ì•½
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#backendnodejs" class="md-nav__link">
    Backend(nodeJS)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#frontendreactjs" class="md-nav__link">
    Frontend(reactJS)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dockerfile-for-react" class="md-nav__link">
    Dockerfile ì‘ì„± - for React
  </a>
  
    <nav class="md-nav" aria-label="Dockerfile ì‘ì„± - for React">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dockerfiledev" class="md-nav__link">
    ê°œë°œ í™˜ê²½ìš© Dockerfile.dev
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dockerfile" class="md-nav__link">
    ìš´ì˜ í™˜ê²½ìš© Dockerfile
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nginx" class="md-nav__link">
    ë¼ìš°íŒ…ìš© Nginx ì„¤ì •(ì •ì íŒŒì¼ ì œê³µì„ ìœ„í•œ)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dockerfile-for-nodejs" class="md-nav__link">
    Dockerfile ì‘ì„± - for NodeJS
  </a>
  
    <nav class="md-nav" aria-label="Dockerfile ì‘ì„± - for NodeJS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dockerfiledev_1" class="md-nav__link">
    ê°œë°œ í™˜ê²½ìš© Dockerfile.dev
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dockerfile_1" class="md-nav__link">
    ìš´ì˜ í™˜ê²½ìš© Dockerfile
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#db" class="md-nav__link">
    DB ì„¸íŒ…
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#proxy-layer-nginx" class="md-nav__link">
    Proxy Layerìš© Nginx ì„¤ì •
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker-compose" class="md-nav__link">
    Docker compose ì‘ì„±
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ready-for-cicd" class="md-nav__link">
    ready for CICD
  </a>
  
    <nav class="md-nav" aria-label="ready for CICD">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#remove-mysql-container" class="md-nav__link">
    remove MySQL Container
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#travis-ci-yaml" class="md-nav__link">
    Travis CI YAML ì‘ì„±
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aws" class="md-nav__link">
    AWS
  </a>
  
    <nav class="md-nav" aria-label="AWS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dockerrunawsjson" class="md-nav__link">
    Dockerrun.aws.json ?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ecs" class="md-nav__link">
    ECS ì‘ì—… ì •ì˜ íŒŒì¼ ì‘ì„±
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aws-beanstalk" class="md-nav__link">
    AWS Beanstalk ìƒì„±
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aws-rds" class="md-nav__link">
    AWS RDS ìƒì„±
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aws_1" class="md-nav__link">
    AWS ë³´ì•ˆê·¸ë£¹
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#beanstalk-rds" class="md-nav__link">
    Beanstalk â†” RDS ì—°ê²°ì„ ìœ„í•œ í™˜ê²½ë³€ìˆ˜ ì„¤ì •
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    ë°°í¬ ì„¤ì •
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    ìµœì¢… í‘¸ì‹œ
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="multi-container-cicd">Multi container CICD</h1>
<h2 id="_1">êµ¬ì„±ë„</h2>
<ul>
<li>
<p>DEV Flow chart</p>
<p><img alt="Multi container CICD/Untitled.png" src="Untitled.png" /></p>
</li>
<li>
<p>Service ENV</p>
<p>Docker-composeë¥¼ ì‚¬ìš©í•´ ëª¨ë“  ì»¨í…Œì´ë„ˆ í™˜ê²½ì„ ì œì–´í•©ë‹ˆë‹¤</p>
<p><img alt="Multi container CICD/Untitled%201.png" src="Untitled%201.png" /></p>
</li>
</ul>
<h2 id="_2">ìš”ì•½</h2>
<hr />
<ol>
<li>ë©€í‹°ì»¨í…Œì´ë„ˆë¥¼ ì´ìš©í•´ ê°œë°œí™˜ê²½ê³¼ ìš´ì˜í™˜ê²½ì„ êµ¬ì¶•í•©ë‹ˆë‹¤</li>
<li>nodeJSë°±ì—”ë“œ â†” reactJSí”„ë¡ íŠ¸ì—”ë“œ ê°„ì— REST API êµ¬ì¡°ë¡œ ë°ì´í„°ë¥¼ ì „ë‹¬í•©ë‹ˆë‹¤(axios)</li>
<li>Nginxì˜ ë¼ìš°íŒ…ì„ í™œìš©í•˜ì—¬ 
URIê°€ /api ë¡œ ì‹œì‘í•˜ë©´ ë°±ì—”ë“œ(NodeJS)ë¡œ, ë‚˜ë¨¸ì§€( / )ëŠ” í”„ë¡ íŠ¸(ReactJS)ë¡œ ë³´ë‚´ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤</li>
<li>Docker Composeë¥¼ ì‚¬ìš©í•´ ì»¨í…Œì´ë„ˆê°„ì˜ í†µì‹  ë“± ê°œë°œí™˜ê²½ì„ êµ¬ì¶•í•©ë‹ˆë‹¤</li>
<li>ê¹ƒí—™ì— í‘¸ì‹œí•˜ë©´ â†’ Travis CI í…ŒìŠ¤íŠ¸â†’ Docker Hubë¡œ ì´ë¯¸ì§€ë¥¼ ì „ë‹¬í•˜ê³  Beanstalkì´ ECSë¥¼ ì´ìš©í•´ ì´ë¯¸ì§€ë¥¼ pullí•˜ê³  ECSë¥¼ ì´ìš©í•´ ì»¨í…Œì´ë„ˆë¥¼ Deployí•˜ë„ë¡ í•©ë‹ˆë‹¤</li>
</ol>
<h2 id="backendnodejs">Backend(nodeJS)</h2>
<hr />
<ol>
<li>ë©”ì¸ ì‘ì—… ë””ë ‰í„°ë¦¬ë¥¼ ìƒì„±í•©ë‹ˆë‹¤</li>
</ol>
<div class="highlight"><pre><span></span><code>mkdir docker_multicon_app
cd docker_multicon_app
</code></pre></div>
<ol>
<li>nodeJSë¡œ ë°±ì•¤ë“œë¥¼ êµ¬ì„±í•©ë‹ˆë‹¤. ë°±ì•¤ë“œ ì‘ì—…ìš© í´ë”ë¥¼ ìƒì„±í•©ë‹ˆë‹¤</li>
</ol>
<div class="highlight"><pre><span></span><code>mkdir backend
cd backend
</code></pre></div>
<ol>
<li>ë…¸ë“œ ì„¸íŒ…ì„ ì‹œì‘í•©ë‹ˆë‹¤. ëª¨ë‘ ê¸°ë³¸ê°’ìœ¼ë¡œ ì§„í–‰í•©ë‹ˆë‹¤</li>
</ol>
<div class="highlight"><pre><span></span><code>npm init
</code></pre></div>
<ol>
<li>
<p>ì¢…ì†ì„±ì„ ìˆ˜ì •í•©ë‹ˆë‹¤</p>
<p>body-parserëŠ” í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì˜¤ëŠ” ìš”ì²­ì˜ ë³¸ë¬¸ì„ í•´ì„í•´ì£¼ëŠ” ë¯¸ë“¤ì›¨ì–´ì…ë‹ˆë‹¤</p>
</li>
</ol>
<div class="highlight"><pre><span></span><code>code package.json
</code></pre></div>
<div class="highlight"><pre><span></span><code>&quot;scripts&quot;: {
&quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;,
&quot;start&quot;: &quot;node server.js&quot;,
&quot;dev&quot;: &quot;nodemon server.js&quot;
},
&quot;dependencies&quot;: {
&quot;express&quot;:&quot;^4.17.1&quot;,
&quot;mysql&quot;:&quot;^2.18.1&quot;,
&quot;nodemon&quot;: &quot;^2.0.7&quot;,
&quot;body-parser&quot;:&quot;^1.19.0&quot;
}
</code></pre></div>
<ol>
<li>
<p>mysqlì—°ê²°ì„ ìœ„í•œ db.jsë¥¼ ì‘ì„±í•©ë‹ˆë‹¤</p>
<p>ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì´ìš©í•˜ë ¤ë©´Â  connectionì„ ì—°ê²°í•œ í›„ ë‹¤ ì‚¬ìš©í•˜ê³  ë‚˜ë©´ ê·¸ connectionì„ ë°˜ë‚©í•´ì•¼í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ ë„ˆë¬´ ë§ì€ ìš”ì²­ì´ ì˜¤ë©´ ì´ ê³¼ì •ì—ì„œ ë¶€í•˜ê°€ ìƒê¸¸ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì—°ê²°ëœ Connectionì„ Poolì— ë³´ê´€í•œ í›„ í•„ìš”í•  ë•Œ Poolì— ìˆëŠ” Connectionì„ ê°€ì ¸ë‹¤ê°€ ì“¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
</li>
</ol>
<div class="highlight"><pre><span></span><code>code db.js
</code></pre></div>
<div class="highlight"><pre><span></span><code>const mysql = require(&quot;mysql&quot;);
const pool = mysql.createPool({
    connectionLimit: 10,
    host: &quot;mysql&quot;,
    user: &quot;root&quot;,
    password: &quot;password&quot;,
    database: &quot;myapp&quot;
});
exports.pool = pool; //ë‹¤ë¥¸ ì•±ì—ì„œ ì“¸ ìˆ˜ ìˆë„ë¡ export
</code></pre></div>
<ol>
<li>appì˜ ì‹œì‘ì ì¸ server.jsë¥¼ ì‘ì„±í•©ë‹ˆë‹¤</li>
</ol>
<div class="highlight"><pre><span></span><code>code server.js
</code></pre></div>
<div class="highlight"><pre><span></span><code>const express = require(&quot;express&quot;);
const bodyParser = require(&quot;body-parser&quot;);
//ì•ì—ì„œ exportëœ poolì˜ ì‹œì‘ì ì¸ db.jsë¥¼ ë¶ˆëŸ¬ì˜¤ê¸°
const db = require(&quot;./db&quot;);

const EXPRESS_PORT = 5000;

const app = express();

//JSONí˜•íƒœë¡œ ì˜¤ëŠ” ìš”ì²­ì„ í•´ì„í•  ìˆ˜ ìˆë„ë¡ parser ì‚¬ìš©
app.use(bodyParser.json());
//------------! í…Œì´ë¸” ìƒì„± !---------------/
//ì°¸ê³ ìš©ìœ¼ë¡œ ê¸°ë¡í•´ë‘ì—ˆìœ¼ë©°, ì‹¤ì œ í™˜ê²½ì—ì„œëŠ” ì»¨í…Œì´ë„ˆ ë¡œë“œì‹œ ë³„ë„ë¡œ í…Œì´ë¸”ì„ ìƒì„±í•©ë‹ˆë‹¤
/*
db.pool.query(`CREATE TABLE lists(
    id INT AUTO_INCREMENT,
    value TEXT,
    PRIMARY KEY (id)
)`, (err, results, fields) =&gt; {
    console.log(`results : ${results}`)
})
*/   
//--------------! API !--------------------/
//DB í…Œì´ë¸”ì— ìˆëŠ” ëª¨ë“  ë°ì´í„°ë¥¼ í”„ë¡ íŠ¸ë¡œ ë³´ë‚´ê¸°
app.get(&#39;/api/values&#39;), function (req, res, next) { //í•¸ë“¤ëŸ¬ ìƒì„±
    db.pool.query(&quot;SELECT * FROM lists;&quot;, //DBì—ì„œ ëª¨ë“  ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
        (err, results, fields) =&gt; {
            if (err)
                return res.status(500).send(err)
            else
                return res.json(results)
        })
})

//í”„ë¡ íŠ¸ì—ì„œ ì…ë ¥í•œ ê°’ì„ DB í…Œì´ë¸”ì— ì…ë ¥
app.post(&#39;/api/values&#39;, function (res, req, next) {
    db.pool.query(`INSERT INTO lists (values) VALUES(&quot;${req.body.value}&quot;);`, //bodyParser ì‚¬ìš©
        (err, results, fields) =&gt; {
            if (err)
                return res.status(500).send(err)
            else
                return res.json({success: true, value: req.body.value})
    })
})

//------------! START EXPRESS !-----------------/

app.listen(EXPRESS_PORT, ()) =&gt; {
    console.log(&quot;app running on PORT 5000&quot;)
}
</code></pre></div>
<h2 id="frontendreactjs">Frontend(reactJS)</h2>
<hr />
<ol>
<li>ë©”ì¸ ì‘ì—… ë””ë ‰í„°ë¦¬ì— ë¦¬ì•¡íŠ¸ë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤. </li>
</ol>
<div class="highlight"><pre><span></span><code>npx create-react-app frontend
</code></pre></div>
<ol>
<li>
<p>ë‹¤ìŒê³¼ ê°™ì€ êµ¬ì¡°ê°€ ë˜ê² ìŠµë‹ˆë‹¤</p>
<p><img alt="Multi container CICD/Untitled%202.png" src="Untitled%202.png" /></p>
</li>
<li>
<p>ë°ì´í„° ì…ë ¥ì„ ìœ„í•´ ë¦¬ì•¡íŠ¸ /src/app.jsì— ì¸í’‹ê³¼ ë²„íŠ¼ì„ ìƒì„±í•©ë‹ˆë‹¤</p>
</li>
</ol>
<div class="highlight"><pre><span></span><code>&lt;div className=&quot;container&quot;&gt;
  &lt;form className=&quot;example&quot;&gt;
    &lt;input
      type=&quot;text&quot;
      placeholder=&quot;type something here&quot;
    /&gt;
    &lt;button type=&quot;submit&quot;&gt;GO&lt;/button&gt;
  &lt;/form&gt;
&lt;/div&gt;
</code></pre></div>
<ol>
<li>ë°ì´í„° ì „ë‹¬ì— useState, useEffect, axiosë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤<ul>
<li>package.json - depencencise</li>
</ul>
</li>
</ol>
<div class="highlight"><pre><span></span><code>&quot;axios&quot; : &quot;^0.21.1&quot; 
-&gt; ì¢…ì†ì„± ì—…ë°ì´íŠ¸ í›„ npm install
</code></pre></div>
<pre><code>- import
</code></pre>
<div class="highlight"><pre><span></span><code>import React, { useState, useEffect } from &#39;react&#39;;
//useState, useEffectë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ reactë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ê°€ì ¸ì˜µë‹ˆë‹¤
import axios from &#39;axios&#39;;
</code></pre></div>
<ul>
<li>useState</li>
</ul>
<div class="highlight"><pre><span></span><code>const [lists, setLists] = useState([]) //ê¸°ë³¸stateëŠ” ë¹ˆ ë°°ì—´
// ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥ëœ ê°’ì„ ê°€ì ¸ì™€ì„œ í™”ë©´ì— ë³´ì—¬ì£¼ê¸°ì „ ì´ Stateì— ë„£ì–´ë‘¡ë‹ˆë‹¤
const [value, setValue] = useState(&quot;&quot;) //ê¸°ë³¸stateì— ë¹ˆ ìŠ¤íŠ¸ë§
//Inputë°•ìŠ¤ì— ì…ë ¥í•œ ê°’ì´ ì´ stateì— ë“¤ì–´ê°‘ë‹ˆë‹¤
</code></pre></div>
<ul>
<li>axios, useEffect</li>
</ul>
<div class="highlight"><pre><span></span><code>useEffect(() =&gt; { //ì´ê³³ì—ì„œ ë°ì´í„°ë² ì´ìŠ¤ì— ìˆëŠ” ê°’ì„ ìš”ì²­
    axios.get(&#39;/api/values&#39;) //ë°ì´í„°ë¥¼ ìš”ì²­í•˜ê¸° ìœ„í•´ get Request ë³´ë‚´ëŠ” ê³³, Nodeì„œë²„ì—ì„œ ì§€ì •í•´ì¤€ ê²½ë¡œëŒ€ë¡œ
      .then(response =&gt; { //ë°±ì—”ë“œ(Node)ê°€ ì²˜ë¦¬ í›„ ì†¡ì‹ í•œ ë°ì´í„°ê°€ ì´ê³³(respose íŒŒë¼ë¯¸í„°)ë¡œ ìˆ˜ì‹ 
        console.log(`response ${response.data}`) //ì–´ë–¤ ê°’ì´ ì™”ëŠ”ì§€ ì½˜ì†”ë¡œ í™•ì¸
        setLists(response.data) //ìˆ˜ì‹ í•œ ë°ì´í„°ë¥¼ ì´ê³³(setLists(38í–‰))ì— ë„£ì–´ì¤Œ
    })
  }, [])

  //changeHandlerì—­í•  : 56í–‰ onChangeì»¨íŠ¸ë¡¤ = inputë°•ìŠ¤ì— ì…ë ¥ì„ í•  ë•Œ onChangeEventê°€ ë°œìƒí•  ë•Œ ë§ˆë‹¤ value stateë¥¼ ë³€í™”ì‹œì¼œì¤Œ
  const changeHandler = (event) =&gt; {  //onChangeí•¸ë“¤ëŸ¬ ì´ë²¤íŠ¸ ë°œìƒì‹œ ë‹¤ìŒ ë‹¨ê³„ ìˆ˜í–‰
    setValue(event.currentTarget.value)
  }

  //submitHandlerì—­í•  : ê°’ì„ input ë°•ìŠ¤ì— ì…ë ¥í•˜ê³  í™•ì¸ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ë°ì´í„°ê°’ì´ DBì— ì €ì¥
  const submitHandler = (event) =&gt; { //ì´ë²¤íŠ¸ë¥¼ ë°›ì•„ì˜µë‹ˆë‹¤
    event.preventDefault(); //ì˜¤ë™ì‘ ë°©ì§€ë¥¼ ìœ„í•´ ê¸°ë³¸ ë™ì‘ì„ ì œê±°í•©ë‹ˆë‹¤
    axios.post(&#39;/api/value&#39;, //ë°ì´í„° ì „ë‹¬ì„ ìœ„í•´ ë°±ì—”ë“œì— POST requestë¥¼ ë³´ëƒ…ë‹ˆë‹¤
      { value: value }) //í‚¤ê°’ : value / ë°ì´í„°ê°’ : value / ì°¸ì¡° : 40í–‰ ë¦¬ìŠ¤íŠ¸ì˜ 0ë²ˆ = value
      .then(response =&gt; { //ë°±ì—”ë“œì—ì„œ ì²˜ë¦¬ í›„ íšŒì‹ ë°›ì€ ë°ì´í„°ë¥¼ responseì— ë°›ì•„ì˜´
        if (response.data.success) { //responseê°€ ì„±ê³µí–ˆë‹¤ë©´ &lt;- server.js 42í–‰ ì°¸ê³ 
          console.log(`response.data : ${response.data}`) //ì„±ê³µí–ˆì„ê²½ìš° ê²°ê³¼ê°’ì„ í•œ ë²ˆ ì‚´í´ë´…ë‹ˆë‹¤
          setLists([...lists, response.data]) //38í–‰ ë¦¬ìŠ¤íŠ¸[0] (lists)ì— ê°’ì„ ë„£ì–´ì£¼ê¸°. ì›ë˜ ë¦¬ìŠ¤íŠ¸ì— ìˆë˜ ë°ì´í„°ì— ì´ì–´ì„œ ë„£ì–´ì£¼ê¸° ìœ„í•´ ...lists(3ë²ˆì§¸)ë¡œ ì‘ì„±
          setValue(&quot;&quot;); //ë°ì´í„° ì…ë ¥ í›„ input ë°•ìŠ¤ ë‚´ìš©ì€ ì‚­ì œ
        } else { //responseê°€ ì‹¤íŒ¨í–ˆë‹¤ë©´
          alert(&quot;DBì— ë°ì´í„° ë„£ê¸° ì‹¤íŒ¨&quot;)
      }
    })
  }
</code></pre></div>
<ul>
<li>ì´ë²¤íŠ¸í•¸ë“¤ëŸ¬ í˜¸ì¶œì„ ìœ„í•œ ë¶€ë¶„(onSubmit, onChange)ê³¼ ë Œë”ë§ ë³´ê°•(ì•„ë˜ ì½”ë“œì¡°ê°ì˜ 3~5í–‰)ì„ ìœ„í•´ html ì½”ë“œë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤. ì´ëŠ” í™”ë©´ì— í‘œì‹œë˜ëŠ” ë¦¬ìŠ¤íŠ¸ì˜ ê°œìˆ˜ê°€ ë‹¤ë¥¼ ë–„ ë Œë”ë§ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ëŠ” ê²ƒì„ ìˆ˜ì •í•©ë‹ˆë‹¤</li>
</ul>
<div class="highlight"><pre><span></span><code>&lt;div className=&quot;container&quot;&gt;

  {lists &amp;&amp; lists.map((list, index) =&gt; ( 
    &lt;li key={index}&gt;{list.value}&lt;/li&gt;
  ))}

  &lt;form className=&quot;example&quot; onSubmit={submitHandler}&gt;
    &lt;input
      type=&quot;text&quot;
      placeholder=&quot;type something here&quot;
      onChange={changeHandler}
      value={value}
    /&gt;
    &lt;button type=&quot;submit&quot;&gt;GO&lt;/button&gt;
  &lt;/form&gt;
&lt;/div&gt;
</code></pre></div>
<ol>
<li>ê³ ë¡œ ìµœì¢…ì ì¸ ì½”ë“œëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤<ul>
<li>App.js</li>
</ul>
</li>
</ol>
<div class="highlight"><pre><span></span><code>import logo from &#39;./logo.svg&#39;;
import &#39;./App.css&#39;;
import React, { useState, useEffect } from &#39;react&#39;;
//useState, useEffectë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ reactë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ê°€ì ¸ì˜µë‹ˆë‹¤
import axios from &#39;axios&#39;; 

function App() {

  useEffect(() =&gt; { //ì´ê³³ì—ì„œ ë°ì´í„°ë² ì´ìŠ¤ì— ìˆëŠ” ê°’ì„ ìš”ì²­
    axios.get(&#39;/api/values&#39;) //ë°ì´í„°ë¥¼ ìš”ì²­í•˜ê¸° ìœ„í•´ get Request ë³´ë‚´ëŠ” ê³³, Nodeì„œë²„ì—ì„œ ì§€ì •í•´ì¤€ ê²½ë¡œëŒ€ë¡œ
      .then(response =&gt; { //ë°±ì—”ë“œ(Node)ê°€ ì²˜ë¦¬ í›„ ì†¡ì‹ í•œ ë°ì´í„°ê°€ ì´ê³³(respose íŒŒë¼ë¯¸í„°)ë¡œ ìˆ˜ì‹ 
        console.log(`response ${response.data}`) //ì–´ë–¤ ê°’ì´ ì™”ëŠ”ì§€ ì½˜ì†”ë¡œ í™•ì¸
        setLists(response.data) //ìˆ˜ì‹ í•œ ë°ì´í„°ë¥¼ ì´ê³³(setLists(38í–‰))ì— ë„£ì–´ì¤Œ
    })
  }, [])

  //changeHandlerì—­í•  : 56í–‰ onChangeì»¨íŠ¸ë¡¤ = inputë°•ìŠ¤ì— ì…ë ¥ì„ í•  ë•Œ onChangeEventê°€ ë°œìƒí•  ë•Œ ë§ˆë‹¤ value stateë¥¼ ë³€í™”ì‹œì¼œì¤Œ
  const changeHandler = (event) =&gt; {  //onChangeí•¸ë“¤ëŸ¬ ì´ë²¤íŠ¸ ë°œìƒì‹œ ë‹¤ìŒ ë‹¨ê³„ ìˆ˜í–‰
    setValue(event.currentTarget.value)
  }

  //submitHandlerì—­í•  : ê°’ì„ input ë°•ìŠ¤ì— ì…ë ¥í•˜ê³  í™•ì¸ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ë°ì´í„°ê°’ì´ DBì— ì €ì¥
  const submitHandler = (event) =&gt; { //ì´ë²¤íŠ¸ë¥¼ ë°›ì•„ì˜µë‹ˆë‹¤
    event.preventDefault(); //ì˜¤ë™ì‘ ë°©ì§€ë¥¼ ìœ„í•´ ê¸°ë³¸ ë™ì‘ì„ ì œê±°í•©ë‹ˆë‹¤
    axios.post(&#39;/api/value&#39;, //ë°ì´í„° ì „ë‹¬ì„ ìœ„í•´ ë°±ì—”ë“œì— POST requestë¥¼ ë³´ëƒ…ë‹ˆë‹¤
      { value: value }) //í‚¤ê°’ : value / ë°ì´í„°ê°’ : value / ì°¸ì¡° : 40í–‰ ë¦¬ìŠ¤íŠ¸ì˜ 0ë²ˆ = value
      .then(response =&gt; { //ë°±ì—”ë“œì—ì„œ ì²˜ë¦¬ í›„ íšŒì‹ ë°›ì€ ë°ì´í„°ë¥¼ responseì— ë°›ì•„ì˜´
        if (response.data.success) { //responseê°€ ì„±ê³µí–ˆë‹¤ë©´ &lt;- server.js 42í–‰ ì°¸ê³ 
          console.log(`response.data : ${response.data}`) //ì„±ê³µí–ˆì„ê²½ìš° ê²°ê³¼ê°’ì„ í•œ ë²ˆ ì‚´í´ë´…ë‹ˆë‹¤
          setLists([...lists, response.data]) //38í–‰ ë¦¬ìŠ¤íŠ¸[0] (lists)ì— ê°’ì„ ë„£ì–´ì£¼ê¸°. ì›ë˜ ë¦¬ìŠ¤íŠ¸ì— ìˆë˜ ë°ì´í„°ì— ì´ì–´ì„œ ë„£ì–´ì£¼ê¸° ìœ„í•´ ...lists(3ë²ˆì§¸)ë¡œ ì‘ì„±
          setValue(&quot;&quot;); //ë°ì´í„° ì…ë ¥ í›„ input ë°•ìŠ¤ ë‚´ìš©ì€ ì‚­ì œ
        } else { //responseê°€ ì‹¤íŒ¨í–ˆë‹¤ë©´
          alert(&quot;DBì— ë°ì´í„° ë„£ê¸° ì‹¤íŒ¨&quot;)
      }
    })
  }

  const [lists, setLists] = useState([]) //ê¸°ë³¸stateëŠ” ë¹ˆ ë°°ì—´
  // ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥ëœ ê°’ì„ ê°€ì ¸ì™€ì„œ í™”ë©´ì— ë³´ì—¬ì£¼ê¸°ì „ ì´ Stateì— ë„£ì–´ë‘¡ë‹ˆë‹¤
  const [value, setValue] = useState(&quot;&quot;) //ê¸°ë³¸stateì— ë¹ˆ ìŠ¤íŠ¸ë§
  //Inputë°•ìŠ¤ì— ì…ë ¥í•œ ê°’ì´ ì´ stateì— ë“¤ì–´ê°‘ë‹ˆë‹¤

  return (
    &lt;div className=&quot;App&quot;&gt;
      &lt;header className=&quot;App-header&quot;&gt;
        &lt;img src={logo} className=&quot;App-logo&quot; alt=&quot;logo&quot; /&gt;

        &lt;div className=&quot;container&quot;&gt;
          {lists &amp;&amp; lists.map((list, index) =&gt; ( //38í–‰ì˜ lists
            &lt;li key={index}&gt;{list.value}&lt;/li&gt; //mapë©”ì†Œë“œ ì‚¬ìš©ì‹œ keyê°’ ëª…ì‹œ í•„ìˆ˜
          ))}
          &lt;form className=&quot;example&quot; onSubmit={submitHandler}&gt;
            &lt;input
              type=&quot;text&quot;
              placeholder=&quot;type something here&quot;
              onChange={changeHandler}
              value={value} //40í–‰ê³¼ ë§¤í•‘
            /&gt;
            &lt;button type=&quot;submit&quot;&gt;GO&lt;/button&gt;
          &lt;/form&gt;
        &lt;/div&gt;        

      &lt;/header&gt;
    &lt;/div&gt;
  );
}

export default App;
</code></pre></div>
<ol>
<li>ë””ìì¸ì„ ìœ„í•´ app.cssë„ ì¶”ê°€í•©ë‹ˆë‹¤</li>
</ol>
<div class="highlight"><pre><span></span><code>code App.css
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="p">.</span><span class="nc">container</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">width</span><span class="p">:</span><span class="w"> </span><span class="mi">375</span><span class="kt">px</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">form</span><span class="p">.</span><span class="nc">example</span><span class="w"> </span><span class="nt">input</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
<span class="w">  </span><span class="k">font-size</span><span class="p">:</span><span class="w"> </span><span class="mi">17</span><span class="kt">px</span><span class="p">;</span>
<span class="w">  </span><span class="k">border</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="kt">px</span><span class="w"> </span><span class="kc">solid</span><span class="w"> </span><span class="kc">grey</span><span class="p">;</span>
<span class="w">  </span><span class="k">float</span><span class="p">:</span><span class="w"> </span><span class="kc">left</span><span class="p">;</span>
<span class="w">  </span><span class="k">width</span><span class="p">:</span><span class="w"> </span><span class="mi">74</span><span class="kt">%</span><span class="p">;</span>
<span class="w">  </span><span class="k">background</span><span class="p">:</span><span class="w"> </span><span class="mh">#f1f1f1</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">form</span><span class="p">.</span><span class="nc">example</span><span class="w"> </span><span class="nt">button</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">float</span><span class="p">:</span><span class="w"> </span><span class="kc">left</span><span class="p">;</span>
<span class="w">  </span><span class="k">width</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="kt">%</span><span class="p">;</span>
<span class="w">  </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
<span class="w">  </span><span class="k">background</span><span class="p">:</span><span class="w"> </span><span class="mh">#2196F3</span><span class="p">;</span>
<span class="w">  </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="kc">white</span><span class="p">;</span>
<span class="w">  </span><span class="k">font-size</span><span class="p">:</span><span class="w"> </span><span class="mi">17</span><span class="kt">px</span><span class="p">;</span>
<span class="w">  </span><span class="k">border</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="kt">px</span><span class="w"> </span><span class="kc">solid</span><span class="w"> </span><span class="kc">grey</span><span class="p">;</span>
<span class="w">  </span><span class="k">border-left</span><span class="p">:</span><span class="w"> </span><span class="kc">none</span><span class="p">;</span>
<span class="w">  </span><span class="k">cursor</span><span class="p">:</span><span class="w"> </span><span class="kc">pointer</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">form</span><span class="p">.</span><span class="nc">example</span><span class="w"> </span><span class="nt">button</span><span class="p">:</span><span class="nd">hover</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">background</span><span class="p">:</span><span class="w"> </span><span class="mh">#0b7dda</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">form</span><span class="p">.</span><span class="nc">example</span><span class="p">::</span><span class="nd">after</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">content</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">;</span>
<span class="w">  </span><span class="k">clear</span><span class="p">:</span><span class="w"> </span><span class="kc">both</span><span class="p">;</span>
<span class="w">  </span><span class="k">display</span><span class="p">:</span><span class="w"> </span><span class="kc">table</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<ol>
<li>
<p>í”„ë¡ íŠ¸ì—ì„œ ë°±ì—”ë“œë¡œ ë°ì´í„°ë¥¼ ë°€ì–´ë„£ì„ ì¤€ë¹„ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤</p>
<p><img alt="Multi container CICD/Untitled%203.png" src="Untitled%203.png" /></p>
</li>
</ol>
<h2 id="dockerfile-for-react">Dockerfile ì‘ì„± - for React</h2>
<hr />
<ul>
<li>
<p>ë‹¤ìŒê³¼ ê°™ì´ frontend ë””ë ‰í„°ë¦¬ì— ì‘ì„±í•©ë‹ˆë‹¤</p>
<p><img alt="Multi container CICD/Untitled%204.png" src="Untitled%204.png" /></p>
</li>
</ul>
<h3 id="dockerfiledev">ê°œë°œ í™˜ê²½ìš© Dockerfile.dev</h3>
<div class="highlight"><pre><span></span><code>code Dockerfile.dev
</code></pre></div>
<div class="highlight"><pre><span></span><code>FROM node:alpine 
#ë„ì»¤í—ˆë¸Œì—ì„œ ë² ì´ìŠ¤ ì´ë¯¸ì§€ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤
WORKDIR /app
#í•´ë‹¹ ì–´í”Œì˜ ì†ŒìŠ¤ì½”ë“œë“¤ì´ /appì— ë“¤ì–´ê°€ê²Œ ë©ë‹ˆë‹¤
COPY package.json ./
#ì†ŒìŠ¤ì½”ë“œê°€ ë°”ë€” ë•Œ ë§ˆë‹¤ ì¢…ì†ì„±ì„ ë‹¤ì‹œ ë³µì‚¬í•˜ì§€ ì•Šë„ë¡ ë¨¼ì € ì‘ì—…í•©ë‹ˆë‹¤
RUN npm install
#ì¢…ì†ì„±ì— ëª…ì‹œëœ ë¼ì´ë¸ŒëŸ¬ë¦¬, í”„ë ˆì„ì›Œí¬ë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤
COPY ./ ./
#ëª¨ë“  ì†ŒìŠ¤ì½”ë“œë¥¼ WORKDIRë¡œ ë³µì‚¬í•©ë‹ˆë‹¤
CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
#ì»¨í…Œì´ë„ˆë¥¼ ë¡œë“œí•  ë•Œ ì‹¤í–‰í•  ëª…ë ¹ì–´ë¥¼ ì§€ì •í•©ë‹ˆë‹¤
</code></pre></div>
<h3 id="dockerfile">ìš´ì˜ í™˜ê²½ìš© Dockerfile</h3>
<div class="highlight"><pre><span></span><code>code Dockerfile
</code></pre></div>
<div class="highlight"><pre><span></span><code>FROM node:alpine as builder
WORKDIR /app
COPY ./package.json ./
RUN npm install
COPY ./ ./
RUN npm run build
#ì—¬ê¸°ê¹Œì§€ nginxì—ì„œ ì‚¬ìš©í•  íŒŒì¼ì„ buildí•©ë‹ˆë‹¤

#Nginxë¥¼ ê°€ë™í•˜ê³  ìœ— ë‹¨ê³„ì—ì„œ ìƒì„±í•œ ë¹Œë“œíŒŒì¼ë“¤ì„ nginxì— ë³µì‚¬í•©ë‹ˆë‹¤
FROM nginx
EXPOSE 3000
#nginx ì»¨í…Œì´ë„ˆê°€ 3000ë²ˆ í¬íŠ¸ë¥¼ listen í•˜ë„ë¡ í•©ë‹ˆë‹¤
COPY ./nginx/default.conf /etc/nginx/conf.d/default.conf
#default.confì„¤ì •íŒŒì¼ ë¯¸ë¦¬ ë§Œë“¤ê³  nginxì»¨í…Œì´ë„ˆ ì•ˆì— ì ìš©í•˜ë„ë¡ ë³µì‚¬í•©ë‹ˆë‹¤
COPY --from=builder /app/build /usr/share/nginx/html
#ë¹Œë“œê°€ ì™„ë£Œëœ íŒŒì¼ì„ Nginx ë£¨íŠ¸ í´ë”ì— ë³µì‚¬í•©ë‹ˆë‹¤
</code></pre></div>
<h3 id="nginx">ë¼ìš°íŒ…ìš© Nginx ì„¤ì •(ì •ì íŒŒì¼ ì œê³µì„ ìœ„í•œ)</h3>
<ul>
<li>frontend ë””ë ‰í† ë¦¬ì— nginxí´ë” ìƒì„±</li>
</ul>
<div class="highlight"><pre><span></span><code>mkdir nginx
cd nginx
code default.conf
</code></pre></div>
<ul>
<li>default.conf</li>
</ul>
<div class="highlight"><pre><span></span><code>server {
  listen 3000;

  location / {

    root /usr/share/nginx/html;
    index index.html index.htm;
    try_files $uri $uri/ /index.html;
  }
}
</code></pre></div>
<pre><code>- listen 3000 : nginx ì„œë²„ê°€ ì‚¬ìš©í•  í¬íŠ¸ë¥¼ ì˜¤í”ˆí•©ë‹ˆë‹¤
- location / : ë§Œì•½ ë£¨íŠ¸ë¡œ ìš”ì²­ì´ ë“¤ì–´ì˜¨ë‹¤ë©´
- root /usr/share/nginx/html : HTMLíŒŒì¼(ë¹Œë“œíŒŒì¼)ì´ ìœ„ì¹˜í•œ ë£¨íŠ¸í´ë”ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤
- index index.html index.htm : ì‚¬ì´íŠ¸ì˜ Indexí˜ì´ì§€ë¥¼ index.htmlë¡œ ì„¤ì •í•©ë‹ˆë‹¤
- try_files $uri $uri/ /index.html
 : React Routerë¥¼ ì‚¬ìš©í•´ì„œ í˜ì´ì§€ê°„ ì´ë™í•  ë•Œ í•„ìš”í•œ ì˜µì…˜ì…ë‹ˆë‹¤

    &lt;aside&gt;
    ğŸ’¡ ReactëŠ” SPAì´ê¸° ë•Œë¬¸ì— index.htmlë‹¨ì¼ íŒŒì¼ë§Œ ê°€ì§€ê³  ìˆìœ¼ë©°, URL GET(REST)ë¡œ ì ‘ì†ì„ í•˜ë ¤ê³  í•  ë•Œê³  index.htmlë¡œ ë¼ìš°íŒ… ì‹œì¼œì•¼í•©ë‹ˆë‹¤.
    í•˜ì§€ë§Œ NginXëŠ” ì´ê²ƒì„ ì¸ì§€í•˜ì§€ ì•Šê³  ìˆê¸° ë•Œë¬¸ì— ì–´ë–¤ ìš”ì²­ì´ ë“¤ì–´ì™€ë„ ê°•ì œë¡œ index.htmlì— ë¼ìš°íŒ… í•˜ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤

    &lt;/aside&gt;
</code></pre>
<h2 id="dockerfile-for-nodejs">Dockerfile ì‘ì„± - for NodeJS</h2>
<hr />
<ul>
<li>ë‹¹ì—°íˆ backend ë””ë ‰í„°ë¦¬ì—ì„œ ì‘ì—…í•©ë‹ˆë‹¤</li>
</ul>
<h3 id="dockerfiledev_1">ê°œë°œ í™˜ê²½ìš© Dockerfile.dev</h3>
<aside>
ğŸ’¡ ë„ˆë¬´ ë§ì´ ë°˜ë³µí–ˆê¸° ë•Œë¬¸ì— ì„¤ëª…ì€ ìƒëµí•©ë‹ˆë‹¤

</aside>

<div class="highlight"><pre><span></span><code>cd backend
code Dockerfile.dev
</code></pre></div>
<div class="highlight"><pre><span></span><code>FROM node:alpine

WORKDIR /app

COPY ./package.json ./

RUN npm install

COPY ./ ./

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;dev&quot;]
#npm run startê°€ ì•„ë‹Œ npm run devë¥¼ ì‚¬ìš©í•´ì„œ nodemonëª¨ë“ˆì„ ì´ìš©í•´ ì‹œì‘í•©ë‹ˆë‹¤
</code></pre></div>
<h3 id="dockerfile_1">ìš´ì˜ í™˜ê²½ìš© Dockerfile</h3>
<div class="highlight"><pre><span></span><code>code Dockerfile
</code></pre></div>
<div class="highlight"><pre><span></span><code>FROM node:alpine

WORKDIR /app

COPY ./package.json ./

RUN npm install

COPY ./ ./

CMD [&quot;npm&quot;, &quot;run&quot;, &quot;start&quot;]
</code></pre></div>
<h2 id="db">DB ì„¸íŒ…</h2>
<hr />
<aside>
ğŸ’¡ DBì‘ì—…ì€ ì¤‘ìš”í•œ ë°ì´í„°ë¥¼ ë‹¤ë£¨ê¸° ë•Œë¬¸ì— ì‘ì€ ì‹¤ìˆ˜ë¡œë„ í° ì¬ì•™ì„ ì´ˆë˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ë”°ë¼ì„œ ê°œë°œí™˜ê²½ì€ ë„ì»¤ë¥¼ ì´ìš©í•˜ê³  ìš´ì˜í™˜ê²½ì—ì„œëŠ” AWS RDSë¥¼ ì‚¬ìš©í•˜ì˜€ìŠµë‹ˆë‹¤

</aside>

<ol>
<li>ê°œë°œí™˜ê²½ì€ ë„ì»¤ë¡œ MySQLì„œë²„ë¥¼ êµ¬ì¶•í•©ë‹ˆë‹¤</li>
<li>í•œê¸€ì´ ê¹¨ì§€ëŠ” ê²ƒì„ ë§‰ê¸° ìœ„í•´ MySQL ì¸ì½”ë”©ì„ UTF-8ë¡œ ì„¤ì •í•©ë‹ˆë‹¤.
MySQLìš© conf íŒŒì¼ì„ ì´ìš©í•´ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</li>
</ol>
<div class="highlight"><pre><span></span><code>mkdir mysql
cd mysql
code my.cnf
</code></pre></div>
<div class="highlight"><pre><span></span><code>[mysqld]
character-set-server=utf8

[mysql]
default-character-set=utf8

[client]
default-character-set=utf8
</code></pre></div>
<ol>
<li>mysql ë””ë ‰í„°ë¦¬ë¥¼ ìƒì„±í•˜ê³  ë„ì»¤íŒŒì¼ì„ ìƒì„±í•©ë‹ˆë‹¤</li>
</ol>
<div class="highlight"><pre><span></span><code>code Dockerfile
</code></pre></div>
<div class="highlight"><pre><span></span><code>FROM mysql:5.7

COPY ./my.cnf /etc/mysql/conf.d/my.cnf
</code></pre></div>
<ol>
<li>MySQL DBë¥¼ ë¡œë“œí•œ í›„ ì´ˆê¸° dbì™€ í…Œì´ë¸” ì‚¬ìš©ì„ ìœ„í•œ ì´ˆê¸° í™˜ê²½ì„ ì œì‘í•©ë‹ˆë‹¤</li>
<li>ë””ë ‰í„°ë¦¬ë¥¼ ìƒˆë¡œ ë§Œë“¤ê³  sqlë¬¸ì„ ì‘ì„±í•©ë‹ˆë‹¤</li>
</ol>
<div class="highlight"><pre><span></span><code>mkdir sqls
cd sqls
code init.sql
</code></pre></div>
<div class="highlight"><pre><span></span><code>DTOP DATABASE IF EXISTS myapp;
-- ì´ì „ì— ìƒì„±ëœ myapp DBê°€ ì¡´ì¬í•  ê²½ìš° ì‚­ì œ
CREATE DATABASE myapp;
USE myapp;

CREATE TABLE lists(
    id INT AUTO_INCREMENT,
    value TEXT,
    PRIMARY KEY (id)
);
</code></pre></div>
<h2 id="proxy-layer-nginx">Proxy Layerìš© Nginx ì„¤ì •</h2>
<hr />
<ol>
<li>ë£¨íŠ¸í´ë”ì— Nginxë¥¼ ìœ„í•œ ë””ë ‰í„°ë¦¬ë¥¼ ìƒì„±í•©ë‹ˆë‹¤</li>
</ol>
<div class="highlight"><pre><span></span><code>mkdir nginx
cd nginx
</code></pre></div>
<ol>
<li>ë„ì»¤íŒŒì¼ì„ ìƒì„±í•©ë‹ˆë‹¤(ê°œë°œ, ìš´ì˜ í™˜ê²½ ì„¤ì •ì´ ê°™ê¸° ë•Œë¬¸ì— .devë¥¼ ë”°ë¡œ ìƒì„±í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤</li>
</ol>
<div class="highlight"><pre><span></span><code>code Dockerfile
</code></pre></div>
<div class="highlight"><pre><span></span><code>FROM nginx
#Nginxë² ì´ìŠ¤ ì´ë¯¸ì§€ ê°€ì ¸ì˜¤ê¸°
COPY ./default.conf /etc/nginx/conf.d/default.conf
#ì‘ì„±ëœ conf íŒŒì¼ì„ Nginxì»¨í…Œì´ë„ˆì— ë³µì‚¬í•˜ì—¬ ì„¤ì • ì ìš©í•˜ê¸°
</code></pre></div>
<ol>
<li>Nginx ì„¤ì •íŒŒì¼ ìƒì„±ì„ ì‹œì‘í•©ë‹ˆë‹¤</li>
</ol>
<div class="highlight"><pre><span></span><code>code default.conf
</code></pre></div>
<div class="highlight"><pre><span></span><code>upstream frontend {
    server frontend:3000;
}

upstream backend {
    server backend:5000;
}

server {
    listen 80;

    location / {
        proxy_pass http://frontend;
    }

    location /api {
        proxy_pass http://backend;
    }

    location /sockjs-node {
        proxy_pass http://frontend;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection &quot;Upgrade&quot;;
    }
}
</code></pre></div>
<pre><code>- ì•„ë˜ 'frontend', 'backend'ëŠ” docker-compose íŒŒì¼ì—ì„œ ëª…ì‹œí•©ë‹ˆë‹¤
- upstream frontend : 3000ë²ˆ í¬íŠ¸ì—ì„œ frontendê°€ ë™ì‘ì¤‘ì¸ ê²ƒì„ ëª…ì‹œí•©ë‹ˆë‹¤
- upstream backend : 5000ë²ˆ í¬íŠ¸ì—ì„œ backendê°€ ë™ì‘ì¤‘ì¸ ê²ƒì„ ëª…ì‹œí•©ë‹ˆë‹¤
- listen 80 : Nginx ì„œë²„ 80ë²ˆ í¬íŠ¸ë¥¼ Listening(ì˜¤í”ˆ) í•©ë‹ˆë‹¤
- location / : ì•„ë˜ì— ë‚˜ì˜¤ëŠ” ì¡°ê±´ì— í•´ë‹¹í•˜ëŠ” ë¼ìš°íŒ… ì„¤ì •ì´ ì—†ìœ¼ë©´ frontendë¡œ ë¼ìš°íŒ… í•©ë‹ˆë‹¤
- location /api : /apië¡œ ë“¤ì–´ì˜¤ëŠ” ìš”ì²­ì€ backendë¡œ ë³´ë‚´ì¤ë‹ˆë‹¤
- location /sockjs-node : ë¦¬ì•¡íŠ¸ ê°œë°œí™˜ê²½ì—ì„œ ë°œìƒí•˜ëŠ” ì—ëŸ¬(â†“)ë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ ì‘ì„±í•©ë‹ˆë‹¤

    ![Multi container CICD/Untitled%205.png](Multi container CICD/Untitled%205.png)
</code></pre>
<h2 id="docker-compose">Docker compose ì‘ì„±</h2>
<hr />
<ul>
<li>
<p>ë””ë ‰í„°ë¦¬ êµ¬ì¡°ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤</p>
<p><img alt="Multi container CICD/Untitled%206.png" src="Untitled%206.png" /></p>
</li>
<li>
<p>ë£¨íŠ¸ í´ë”ì—ì„œ ì»´í¬ì¦ˆ íŒŒì¼ì„ ì‘ì„±í•©ë‹ˆë‹¤</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code>code docker-compose.yml
</code></pre></div>
<div class="highlight"><pre><span></span><code>version: &quot;3&quot;
services:
frontend:
  build: #ê°œë°œí™˜ê²½ì˜ Dockerfileì´ ì–´ë””ìˆëŠ”ì§€ ì•Œë ¤ì¤ë‹ˆë‹¤
    dockerfile: Dockerfile.dev
    context: ./frontend
  container_name: app_frontend
  environment:
    - CHOKIDAR_USEPOLLING=true
  volumes: #ì½”ë“œìˆ˜ì •í›„ ì´ë¯¸ì§€ë¥¼ ë‹¤ì‹œ ë¹Œë“œí•  í•„ìš” ì—†ë„ë¡ ë§¤í•‘í•©ë‹ˆë‹¤
    - /app/node_modules #ë§¤í•‘ì—ì„œ ì œì™¸í•©ë‹ˆë‹¤
    - ./frontend:/app #ë‚˜ë¨¸ì§€ëŠ” ì „ë¶€ ì´ê³³ìœ¼ë¡œ ë§¤í•‘í•©ë‹ˆë‹¤
  stdin_open: true #ë¦¬ì•¡íŠ¸ ì•±ì„ ì¢…ë£Œí•  ë•Œ ë°œìƒí•˜ëŠ” ë²„ê·¸ë¥¼ í•´ê²°í•´ì¤ë‹ˆë‹¤
nginx:
  restart: always #proxyì—­í• ì„ í•˜ê³  ìˆëŠ” Nginxê°€ ì£½ì–´ë²„ë¦¬ë©´ ì‹œìŠ¤í…œ ì „ì²´ê°€ ë‹¤ìš´ë˜ê¸° ë•Œë¬¸ì— ì–˜ëŠ” í•­ìƒ ì¬ì‹œì‘
  #ì¬ì‹œì‘ ì •ì±…
  #no : ì–´ë–¤ ìƒí™©ì—ë„ ì¬ì‹œì‘ í•˜ì§€ ì•ŠìŒ
  #always : í•­ìƒ ì¬ì‹œì‘
  #on-failure : on-failureì—ëŸ¬ì½”ë“œì™€ í•¨ê»˜ ì»¨í…Œì´ë„ˆê°€ ë©ˆì¶”ì—ˆì„ ë•Œë§Œ ì¬ì‹œì‘
  #unless-stopped : ê°œë°œìê°€ ì„ì˜ë¡œ ë©ˆì¶”ë ¤ í•˜ëŠ” ê²½ìš°ë¥¼ ì œì™¸í•˜ê³  í•­ìƒ ì¬ì‹œì‘
  build:
    dockerfile: Dockerfile
    context: ./nginx
  container_name: app_proxy_nginx
  ports: -&quot;3000:80&quot;
backend:
  build:
    dockerfile: Dockerfile.dev
    context: ./backend
  container_name: app_backend
  volumes:
    - /app/node_modules
    - ./backend:/app
mysql:
  build: ./mysql
  restart: unless-stopped
  container_name: app_mysql
ports: -&quot;3306:3306&quot;
volumes:
  - ./mysql/mysql_data:/var/lib/mysql
  - ./mysql/sqls/:/docker-entrypoint-initdb.d/
environment: #í™˜ê²½ë³€ìˆ˜
  MYSQL_ROOT_PASSWORD: password
  MYSQL_DATABASE: myapp
</code></pre></div>
<ol>
<li>ì‘ì„±ì´ ì™„ë£Œë˜ì—ˆìœ¼ë©´ ì»´í¬ì¦ˆë¥¼ ì‹¤í–‰í•´ë´…ë‹ˆë‹¤</li>
</ol>
<div class="highlight"><pre><span></span><code>docker-compose up
</code></pre></div>
<ol>
<li>ERROR : -initialize specified but the data directory has files in it. Aborting. ë°œìƒì‹œ
ë³¼ë¥¨ìœ¼ë¡œ ì—°ê²°ëœ mysql ë°ì´í„° ë””ë ‰í„°ë¦¬ë¥¼ ë‚ ë ¤ì¤ë‹ˆë‹¤</li>
</ol>
<h2 id="ready-for-cicd">ready for CICD</h2>
<hr />
<h3 id="remove-mysql-container">remove MySQL Container</h3>
<ol>
<li>AWSí™˜ê²½ì—ì„œëŠ” DBë¡œ RDSë¥¼ ì´ìš©í•˜ê¸° ë•Œë¬¸ì— MySQL ì»¨í…Œì´ë„ˆê°€ í•„ìš”í•˜ì§€ ì•Šìœ¼ë‹ˆ ì‚­ì œí•©ë‹ˆë‹¤</li>
<li>
<p>docker-compose.yml ì—ì„œ MySQLì½”ë“œë¥¼ ì œê±°í•©ë‹ˆë‹¤</p>
<p><img alt="Multi container CICD/Untitled%207.png" src="Untitled%207.png" /></p>
</li>
</ol>
<h2 id="travis-ci-yaml">Travis CI YAML ì‘ì„±</h2>
<ol>
<li>ë£¨íŠ¸ í´ë”ì— íŠ¸ë ˆë¹„ìŠ¤ ì„¤ì • íŒŒì¼ì„ ì‘ì„±í•©ë‹ˆë‹¤</li>
</ol>
<div class="highlight"><pre><span></span><code>code .travis.yml
</code></pre></div>
<div class="highlight"><pre><span></span><code>language: generic

sudo: required

services: #Travis CIì—ê²Œ ë„ì»¤ í™˜ê²½ìœ¼ë¡œ ë§Œë“¤ê²ƒì´ë¼ê³  ì„ ì–¸í•´ì£¼ê¸°
  - docker

before_install: #êµ¬ì„±ëœ ë„ì»¤ í™˜ê²½ì—ì„œ Dockerfile.devë¥¼ ì´ìš©í•´ ì´ë¯¸ì§€ ìƒì„±
  - docker build -t dotoryeee/build-test -f ./frontend/Dockerfile.dev ./frontend

script: #ìƒì„±ëœ í…ŒìŠ¤íŠ¸ ì´ë¯¸ì§€ë¥¼ ì´ìš©í•´ í…ŒìŠ¤íŠ¸ ìˆ˜í–‰í•˜ê¸°
  - docker run -e CI=true dotoryeee/build-test npm run test

after_success: #í…ŒìŠ¤íŠ¸ê°€ ì„±ê³µí•˜ë©´ ë³¸ê²©ì ìœ¼ë¡œ ìš´ì˜ë²„ì „ì„ ë¹Œë“œ
  - docker build -t dotoryeee/docker-frontend ./frontend
  - docker build -t dotoryeee/docker-backend ./backend
  - docker build -t dotoryeee/docker-nginx ./nginx
  #ë„ì»¤ í—ˆë¸Œì— ë¡œê·¸ì¸
  - echo &quot;$DOCKER_HUB_PASSWORD&quot; | docker login -u &quot;$DOCKER_HUB_ID&quot; --password-stdin
  #ë„ì»¤ í—ˆë¸Œì— ì´ë¯¸ì§€ í‘¸ì‹œ
  - docker push dotoryeee/docker-frontend
  - docker push dotoryeee/docker-backend
  - docker push dotoryeee/docker-nginx
</code></pre></div>
<ol>
<li>
<p>ê³„ì • ì •ë³´ëŠ” Travis CI í™˜ê²½ë³€ìˆ˜ì— ì…ë ¥í•©ë‹ˆë‹¤</p>
<p><img alt="Multi container CICD/Untitled%208.png" src="Untitled%208.png" /></p>
</li>
<li>
<p>ê¹ƒí—™ì— í‘¸ì‹œí•˜ê³  í•œ ë²ˆ ì§€ì¼œë´…ë‹ˆë‹¤</p>
<p><img alt="Multi container CICD/Untitled%209.png" src="Untitled%209.png" /></p>
</li>
<li>
<p>í™˜ê²½ë³€ìˆ˜ë„ ì˜ ê°€ì ¸ì˜¤ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</p>
<p><img alt="Multi container CICD/Untitled%2010.png" src="Untitled%2010.png" /></p>
</li>
<li>
<p>í—¹</p>
<p><img alt="Multi container CICD/Untitled%2011.png" src="Untitled%2011.png" /></p>
</li>
<li>
<p>ë„ì»¤ í—ˆë¸Œì— ì´ë¯¸ì§€ê°€ ì˜ ì—…ë¡œë“œ ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</p>
<p><img alt="Multi container CICD/Untitled%2012.png" src="Untitled%2012.png" /></p>
</li>
</ol>
<h2 id="aws">AWS</h2>
<hr />
<h3 id="dockerrunawsjson">Dockerrun.aws.json ?</h3>
<ul>
<li>Dockerfileì´ ë‹¤ìˆ˜ ì¡´ì¬í•˜ëŠ” ê²½ìš° Beanstalkì´ ì–´ë–»ê²Œ ì²˜ë¦¬í•´ì•¼ í•˜ëŠ”ì§€ í”„ë¡œì„¸ìŠ¤ë¥¼ ëª¨ë¥´ê¸° ë•Œë¬¸ì— Dockerrun.aws.jsonì„ ì´ìš©í•´ 'ì‘ì—… ì •ì˜(Task Definition)'ë¥¼ ëª…ì‹œí•´ì¤„ ìˆ˜ ìˆìœ¼ë©° ì‘ì—… ì •ì˜ë¥¼ ë“±ë¡í•  ë–„ëŠ” 'ì»¨í…Œì´ë„ˆ ì •ì˜(Container Definition)'ë„ ëª…ì‹œí•´ì•¼ í•©ë‹ˆë‹¤</li>
<li>ë”°ë¼ì„œ ë©€í‹°ì»¨í…Œì´ë„ˆ í™˜ê²½ì—ì„œë§Œ í•„ìš”í•©ë‹ˆë‹¤</li>
<li>ì‘ì—…ì •ì˜ì—ì„œ í•  ìˆ˜ ìˆëŠ” ê²ƒ<ul>
<li>ì»¨í…Œì´ë„ˆì—ì„œ ì‚¬ìš©í•  ë„ì»¤ ì´ë¯¸ì§€</li>
<li>ì»¨í…Œì´ë„ˆë¥¼ ë„ìš¸ vCPU, ë©”ëª¨ë¦¬</li>
<li>ì»¨í…Œì´ë„ˆê°€ ì‚¬ìš©í•  ë„ì»¤ ë„¤íŠ¸ì›Œí¬</li>
<li>ì‘ì—…ì´ í˜¸ìŠ¤íŒ…ë˜ëŠ” ì¸í”„ë¼</li>
<li>ì‘ì—…ì— ì‚¬ìš©í•  ë¡œê¹… êµ¬ì„±</li>
<li>AWS IAM</li>
</ul>
</li>
</ul>
<h3 id="ecs">ECS ì‘ì—… ì •ì˜ íŒŒì¼ ì‘ì„±</h3>
<ol>
<li>ë£¨íŠ¸ í´ë”ì— JSON íŒŒì¼ì„ ìƒì„±í•©ë‹ˆë‹¤</li>
</ol>
<div class="highlight"><pre><span></span><code>code Dockerrun.aws.json
</code></pre></div>
<div class="highlight"><pre><span></span><code>{
    &quot;AWSEBDockerrunVersion&quot;: 2,
    &quot;containerDefinitions&quot;: [
        {
            &quot;name&quot;: &quot;frontend&quot;,
            &quot;image&quot;: &quot;dotoryeee/docker-frontend&quot;,
            &quot;hostname&quot;: &quot;frontend&quot;,
            &quot;essential&quot;: false,
            &quot;memory&quot;: 128
        },
        {
            &quot;name&quot;: &quot;backend&quot;,
            &quot;image&quot;: &quot;dotoryeee/docker-backend&quot;,
            &quot;hostname&quot;: &quot;backend&quot;,
            &quot;essential&quot;: false,
            &quot;memory&quot;: 128
        },
        {
            &quot;name&quot;: &quot;nginx&quot;,
            &quot;image&quot;: &quot;dotoryeee/docker-nginx&quot;,
            &quot;hostname&quot;: &quot;nginx&quot;,
            &quot;essential&quot;: true,
            &quot;portMappings&quot;: [
                {
                    &quot;hostPort&quot;: 80,
                    &quot;containerPort&quot;: 80
                }
            ],
            &quot;links&quot;: [&quot;frontend&quot;, &quot;backend&quot;],
            &quot;memory&quot;:128
        }
    ]
}
</code></pre></div>
<ol>
<li>ì»¨í…Œì´ë„ˆ ì •ì˜ ê°„ë‹¨ ì„¤ëª…<ul>
<li>name : ì»¨í…Œì´ë„ˆ ì´ë¦„</li>
<li>hostname : ì´ê²ƒì„ ì´ìš©í•´ì„œ ë„ì»¤ ì»´í¬ì¦ˆë¥¼ ì´ìš©í•´ ìƒì„±ëœ ë‹¤ë¥¸ ì»¨í…Œì´ë„ˆì—ì„œ ì ‘ê·¼ ê°€ëŠ¥</li>
<li>essential : ì»¨í…Œì´ë„ˆê°€ ì‹¤íŒ¨í•  ê²½ìš° ì‘ì—…ì„ ì¤‘ì§€í•´ì•¼í•˜ë©´ true. í•„ìˆ˜ì ì´ì§€ ì•Šì€ ì»¨í…Œì´ë„ˆëŠ” ì¸ìŠ¤í„´ìŠ¤ì˜ ë‚˜ë¨¸ì§€ ì»¨í…Œì´ë„ˆì— ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•Šê³  ì¢…ë£Œë˜ê±°ë‚˜ ì¶©ëŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
ì§€ê¸ˆ ì‘ì—…ì—ì„  Nginxê°€ ì£½ìœ¼ë©´ ì•„ë¬´ê²ƒë„ ë™ì‘í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— Nginxë§Œ true ì…ë‹ˆë‹¤</li>
<li>
<p>links : ì—°ê²°í•  ì»¨í…Œì´ë„ˆì˜ ëª©ë¡. ì—°ê²°ëœ ì»¨í…Œì´ë„ˆëŠ” ì„œë¡œë¥¼ ê²€ìƒ‰í•˜ê³  í†µì‹ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</p>
<p>í˜„ì¬ linksì²˜ëŸ¼ ì„¤ì •í•˜ë©´ ì•„ë˜ ê·¸ë¦¼ ì²˜ëŸ¼ ì—°ê²°ë©ë‹ˆë‹¤</p>
<p><img alt="Multi container CICD/Untitled%2013.png" src="Untitled%2013.png" /></p>
</li>
</ul>
</li>
</ol>
<h3 id="aws-beanstalk">AWS Beanstalk ìƒì„±</h3>
<ul>
<li>
<p>ë©€í‹°ì»¨í…Œì´ë„ˆ í”Œë«í¼ìœ¼ë¡œ ìƒì„±í•©ë‹ˆë‹¤</p>
<p><img alt="Multi container CICD/Untitled%2014.png" src="Untitled%2014.png" /></p>
</li>
</ul>
<h3 id="aws-rds">AWS RDS ìƒì„±</h3>
<ol>
<li>RDSì ‘ì†ì„ ìœ„í•´ Docker-compose íŒŒì¼ì— ë‹¤ìŒê³¼ ê°™ì´ í™˜ê²½ë³€ìˆ˜ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤</li>
</ol>
<div class="highlight"><pre><span></span><code>environment: 
  MYSQL_HOST: mysql
  MYSQL_USER: root
  MYSQL_ROOT_PASSWORD: password
  MYSQL_DATABASE: myapp
  MYSQL_PORT: 3306
</code></pre></div>
<ol>
<li>RDSì ‘ì†ì„ ìœ„í•´ /backend/db.js íŒŒì¼ì—ì„œ í™˜ê²½ë³€ìˆ˜ë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤</li>
</ol>
<div class="highlight"><pre><span></span><code>const pool = mysql.createPool({
    connectionLimit: 10,
    host: process.env.MYSQL_HOST,
    user: process.env.MYSQL_USER,
    password: process.env.MYSQL_ROOT_PASSWORD,
    database: process.env.MYSQL_DATABASE,
    port: process.env.MYSQL_PORT
});
</code></pre></div>
<ol>
<li>
<p>AWS RDSì— ì ‘ì†í•´ì„œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤</p>
<p><img alt="Multi container CICD/Untitled%2015.png" src="Untitled%2015.png" /></p>
</li>
<li>
<p>í™˜ê²½ë³€ìˆ˜ì— ë§ì¶°ì„œ ì„¸íŒ…í•´ì¤ë‹ˆë‹¤</p>
<p><img alt="Multi container CICD/Untitled%2016.png" src="Untitled%2016.png" /></p>
</li>
<li>
<p>í¸í•˜ê²Œ ì¶”ê°€ ì„¤ì •ì—ì„œ ì´ˆê¸° DBë„ ë¯¸ë¦¬ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤</p>
<p><img alt="Multi container CICD/Untitled%2017.png" src="Untitled%2017.png" /></p>
</li>
</ol>
<h3 id="aws_1">AWS ë³´ì•ˆê·¸ë£¹</h3>
<ol>
<li>
<p>ì¸ë°”ìš´ë“œ ì˜µì…˜ ì—†ì´ SGë¥¼ ìƒì„±í•©ë‹ˆë‹¤</p>
<p><img alt="Multi container CICD/Untitled%2018.png" src="Untitled%2018.png" /></p>
</li>
<li>
<p>ì¸ë°”ìš´ë“œì— SGìŠ¤ìŠ¤ë¡œë¥¼ ì†ŒìŠ¤ë¡œ ë“±ë¡í•˜ê³  3306 í¬íŠ¸ë¥¼ í—ˆìš©í•©ë‹ˆë‹¤</p>
<p>ì´ëŠ” VPC ë‚´ë¶€ì—ì„œë§Œ í†µì‹ ì„ í—ˆìš©í•˜ê²Œ í•©ë‹ˆë‹¤</p>
<p><img alt="Multi container CICD/Untitled%2019.png" src="Untitled%2019.png" /></p>
</li>
<li>
<p>RDSì— ë°©ê¸ˆ ìƒì„±í•œ ë³´ì•ˆê·¸ë£¹ì„ ë“±ë¡í•©ë‹ˆë‹¤</p>
<p><img alt="Multi container CICD/Untitled%2020.png" src="Untitled%2020.png" /></p>
</li>
<li>
<p>ìˆ˜ì •ì‚¬í•­ì„ ì¦‰ì‹œ ì ìš©í•©ë‹ˆë‹¤</p>
<p><img alt="Multi container CICD/Untitled%2021.png" src="Untitled%2021.png" /></p>
</li>
<li>
<p>ì´ë²ˆì—” Beanstalkì— ë³´ì•ˆê·¸ë£¹ì„ ì ìš©í•©ë‹ˆë‹¤
Beanstalkì˜ ë™ì‘í™˜ê²½(env) â†’ Configuration â†’ Instanceì˜ Edit ë©”ë‰´ì— ì§„ì…í•©ë‹ˆë‹¤</p>
<p><img alt="Multi container CICD/Untitled%2022.png" src="Untitled%2022.png" /></p>
</li>
<li>
<p>ë°©ê¸ˆ ë§Œë“  SGë¥¼ ì ìš©í•©ë‹ˆë‹¤</p>
<p><img alt="Multi container CICD/Untitled%2023.png" src="Untitled%2023.png" /></p>
</li>
</ol>
<h3 id="beanstalk-rds">Beanstalk â†” RDS ì—°ê²°ì„ ìœ„í•œ í™˜ê²½ë³€ìˆ˜ ì„¤ì •</h3>
<ol>
<li>ë¹ˆìŠ¤í†¡ ì•ˆì—ìˆëŠ” ì»¨í…Œì´ë„ˆë“¤ì€ MySQLê³¼ ì†Œí†µí•  ë–„ í™˜ê²½ë³€ìˆ˜ë¥¼ ì¸ì‹í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— ë”°ë¡œ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤</li>
<li>
<p>RDSì˜ ì—”ë“œí¬ì¸íŠ¸(ì ‘ì†)ì£¼ì†Œë¥¼ ë³µì‚¬í•©ë‹ˆë‹¤</p>
<p><img alt="Multi container CICD/Untitled%2024.png" src="Untitled%2024.png" /></p>
</li>
<li>
<p>ë¹ˆìŠ¤í†¡ í™˜ê²½ êµ¬ì„±ì—ì„œ Softwareë¥¼ í¸ì§‘í•©ë‹ˆë‹¤</p>
<p><img alt="Multi container CICD/Untitled%2025.png" src="Untitled%2025.png" /></p>
</li>
<li>
<p>ë‹¤ìŒê³¼ ê°™ì´ í™˜ê²½ë³€ìˆ˜ë¥¼ ì„¤ì •í•˜ê³  ì €ì¥í•©ë‹ˆë‹¤</p>
<p><img alt="Multi container CICD/Untitled%2026.png" src="Untitled%2026.png" /></p>
</li>
</ol>
<h2 id="_3">ë°°í¬ ì„¤ì •</h2>
<ol>
<li>.travis.ymlì— ë‹¤ìŒ ì½”ë“œë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤</li>
</ol>
<div class="highlight"><pre><span></span><code>deploy:
  provider: elasticbeanstalk
  region: &quot;ap-northeast-2&quot;
  app: &quot;dotoryeee_FIRST_ECS_APP&quot;
  env: &quot;Dotoryeeefirstecsapp-env&quot;
  bucket_name: elasticbeanstalk-ap-northeast-2-737382971423
  bucket_path: &quot;dotoryeee_FIRST_ECS_APP&quot;
  on:
    branch: master

  access_key_id: $AWS_ACCESS_KEY
  secret_access_key: $AWS_SECRET_ACCESS_KEY
</code></pre></div>
<ol>
<li>
<p>travis í™˜ê²½ë³€ìˆ˜ì— AWS API KEYì •ë³´ë¥¼ ì¶”ê°€í•´ì¤ë‹ˆë‹¤</p>
<p><img alt="Multi container CICD/Untitled%2027.png" src="Untitled%2027.png" /></p>
</li>
</ol>
<h2 id="_4">ìµœì¢… í‘¸ì‹œ</h2>
<ol>
<li>git push</li>
<li>
<p>ë¹Œë“œ ì„±ê³µ</p>
<p><img alt="Multi container CICD/Untitled%2028.png" src="Untitled%2028.png" /></p>
</li>
<li>
<p>ìë™ìœ¼ë¡œ ë¹ˆìŠ¤í†¡ì— ë°°í¬ë©ë‹ˆë‹¤</p>
<p><img alt="Multi container CICD/Untitled%2029.png" src="Untitled%2029.png" /></p>
</li>
</ol>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["content.code.copy"], "search": "../assets/javascripts/workers/search.db81ec45.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.a00a7c5e.min.js"></script>
      
    
  </body>
</html>