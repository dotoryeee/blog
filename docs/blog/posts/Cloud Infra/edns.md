---
draft: false
date: 2025-03-18
authors:
  - dotoryeee
categories:
  - server
---
# eDNS 란

<!-- more -->

## 중요한 이유
DNS 서비스 제공자(Google, Cloudflare 등)들이 EDNS 표준을 구현하지 않은 DNS에 대해 2019년부터 중단

## 비교표

| 구분 | EDNS 사용 시 | EDNS 미사용 시 |
|------|-------------|--------------|
| 패킷 크기 | 512바이트 이상 가능 | 512바이트로 제한 |
| 플래그 필드 | 최대 16개의 플래그 지원 | 제한된 플래그 필드 |
| 응답 코드 | 확장된 응답 코드 공간 | 제한된 응답 코드 |
| DNSSEC 지원 | 지원 (필수적) | 미지원 |
| 지리적 위치 정보 | EDNS Client Subnet(ECS) 옵션으로 전송 가능 | 불가능 |
| 패킷 처리 | 대용량 패킷 처리 가능 | 대용량 패킷 처리 불가 |
| 보안 | 향상된 보안 기능 지원 | 제한된 보안 기능 |
| 방화벽 호환성 | 일부 방화벽에서 문제 발생 가능 | 대부분의 방화벽과 호환 |
| DNS 증폭 공격 | 가능성 증가 | 상대적으로 낮은 위험 |
| 프로토콜 확장성 | 향후 기능 추가 용이 | 확장 어려움 |

## 변경된 로직
``` mermaid
graph TD
    A[클라이언트] -->|DNS 요청| B[DNS 서버]
    B -->|전통적 DNS| C[단순 도메인 확인]
    B -->|EDNS 확장 기능| D[확장된 DNS 처리]
    D -->|DNS 필터링| E[허용되지 않은 도메인 필터링]
    D -->|DNSSEC| F[DNS 보안 확장]
    D -->|DNS 마이그레이션| G[다운타임 없는 인프라 마이그레이션]
    E -->|싱크홀 작업| H[차단된 도메인 요청 리다이렉션]
    E -->|로깅 작업| I[요청 기록 및 액세스 허용]
    F -->|서명 검증| J[DNS 하이재킹 방지]
    G -->|네임서버 변경| K[새 환경으로 트래픽 이동]
```

